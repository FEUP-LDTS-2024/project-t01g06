


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > GameViewer</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">Game.view</a>
</div>

<h1>Coverage Summary for Class: GameViewer (Game.view)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">GameViewer</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/22)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/66)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package Game.view;
&nbsp;
&nbsp;import Game.model.gameModel.GameModel;
&nbsp;import Game.model.elements.Position;
&nbsp;import Game.model.elements.fighter.Ally;
&nbsp;import Game.model.elements.fighter.Enemy;
&nbsp;import Game.model.elements.fighter.Fighter;
&nbsp;import Game.model.elements.obstacles.Bush;
&nbsp;import Game.model.elements.obstacles.Obstacle;
&nbsp;import Game.model.elements.obstacles.SmallStoneWall;
&nbsp;import Game.model.elements.obstacles.SmallWoodenWall;
&nbsp;import Game.model.elements.powerUps.ExtraAim;
&nbsp;import Game.model.elements.powerUps.ExtraDamage;
&nbsp;import Game.model.elements.powerUps.ExtraHealth;
&nbsp;import Game.model.elements.powerUps.PowerUp;
&nbsp;import Game.model.gameModel.GameUtils;
&nbsp;import Game.view.elements.Drawable;
&nbsp;import Game.view.elements.fighter.AllyDraw;
&nbsp;import Game.view.elements.fighter.EnemyDraw;
&nbsp;import Game.view.elements.fighter.PlayerDraw;
&nbsp;import Game.view.elements.obstacles.BushDraw;
&nbsp;import Game.view.elements.obstacles.SmallStoneWallDraw;
&nbsp;import Game.view.elements.obstacles.SmallWoodenWallDraw;
&nbsp;import Game.view.elements.powerUps.ExtraAimDraw;
&nbsp;import Game.view.elements.powerUps.ExtraDamageDraw;
&nbsp;import Game.view.elements.powerUps.ExtraHealthDraw;
&nbsp;import com.googlecode.lanterna.SGR;
&nbsp;import com.googlecode.lanterna.TerminalPosition;
&nbsp;import com.googlecode.lanterna.TerminalSize;
&nbsp;import com.googlecode.lanterna.TextColor;
&nbsp;import com.googlecode.lanterna.graphics.TextGraphics;
&nbsp;import com.googlecode.lanterna.screen.Screen;
&nbsp;
&nbsp;import java.io.IOException;
&nbsp;import java.util.ArrayList;
&nbsp;import java.util.List;
&nbsp;
&nbsp;public class GameViewer extends Viewer {
&nbsp;
&nbsp;    public GameViewer(GameModel gameModel) {
<b class="nc">&nbsp;        super(gameModel);</b>
&nbsp;    }
&nbsp;
&nbsp;    public void draw(Screen screen) throws IOException {
<b class="nc">&nbsp;        screen.clear();</b>
&nbsp;
<b class="nc">&nbsp;        TextGraphics textGraphics = screen.newTextGraphics();</b>
<b class="nc">&nbsp;        int width = screen.getTerminalSize().getColumns();</b>
<b class="nc">&nbsp;        int height = screen.getTerminalSize().getRows();</b>
&nbsp;
<b class="nc">&nbsp;        drawBackground(textGraphics, width, height);</b>
<b class="nc">&nbsp;        drawElements(textGraphics);</b>
&nbsp;
<b class="nc">&nbsp;        screen.refresh();</b>
&nbsp;    }
&nbsp;
&nbsp;    public void drawFighterCombatPhase(Screen screen, Fighter fighter, Fighter target) throws IOException {
<b class="nc">&nbsp;        screen.clear();</b>
&nbsp;
<b class="nc">&nbsp;        TextGraphics textGraphics = screen.newTextGraphics();</b>
<b class="nc">&nbsp;        int width = screen.getTerminalSize().getColumns();</b>
<b class="nc">&nbsp;        int height = screen.getTerminalSize().getRows();</b>
&nbsp;
<b class="nc">&nbsp;        drawBackground(textGraphics, width, height);</b>
<b class="nc">&nbsp;        drawElements(textGraphics);</b>
<b class="nc">&nbsp;        drawSideInfo(textGraphics, fighter, target);</b>
<b class="nc">&nbsp;        drawTargetSelection(textGraphics, target.getPosition());</b>
&nbsp;
<b class="nc">&nbsp;        screen.refresh();</b>
&nbsp;    }
&nbsp;
&nbsp;    private List&lt;Drawable&gt; createElements(){
<b class="nc">&nbsp;        List&lt;Drawable&gt; elements = new ArrayList&lt;&gt;();</b>
<b class="nc">&nbsp;        GameModel gameModel = (GameModel) super.getModel();</b>
<b class="nc">&nbsp;        elements.add(new PlayerDraw(gameModel.getPlayer()));</b>
&nbsp;
<b class="nc">&nbsp;        for(Enemy enemy : gameModel.getEnemyList()) {</b>
<b class="nc">&nbsp;            elements.add(new EnemyDraw(enemy));</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        for(Ally al : gameModel.getAllyList()){</b>
<b class="nc">&nbsp;            elements.add(new AllyDraw(al));</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        for(Obstacle ob : gameModel.getObstacleList()){</b>
<b class="nc">&nbsp;            if(ob instanceof Bush){</b>
<b class="nc">&nbsp;                elements.add(new BushDraw((Bush) ob));</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            else if(ob instanceof SmallStoneWall){</b>
<b class="nc">&nbsp;                elements.add(new SmallStoneWallDraw((SmallStoneWall) ob));</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            else if(ob instanceof SmallWoodenWall){</b>
<b class="nc">&nbsp;                elements.add(new SmallWoodenWallDraw((SmallWoodenWall) ob));</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        for(PowerUp pu : gameModel.getPowerUpList()){</b>
<b class="nc">&nbsp;            if(pu instanceof ExtraHealth){</b>
<b class="nc">&nbsp;                elements.add(new ExtraHealthDraw((ExtraHealth) pu));</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            else if(pu instanceof ExtraAim){</b>
<b class="nc">&nbsp;                elements.add(new ExtraAimDraw((ExtraAim) pu));</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            else if(pu instanceof ExtraDamage){</b>
<b class="nc">&nbsp;                elements.add(new ExtraDamageDraw((ExtraDamage) pu));</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return elements;</b>
&nbsp;    }
&nbsp;
&nbsp;    private void drawBackground(TextGraphics textGraphics, int width, int height){
<b class="nc">&nbsp;        GameModel gameModel = (GameModel) super.getModel();</b>
<b class="nc">&nbsp;        textGraphics.setBackgroundColor(TextColor.ANSI.BLACK);</b>
<b class="nc">&nbsp;        textGraphics.setForegroundColor(TextColor.ANSI.GREEN);</b>
<b class="nc">&nbsp;        textGraphics.fillRectangle(new TerminalPosition(gameModel.getArenaStartPoint(), 0), new TerminalSize(width, height), &#39;~&#39;);</b>
&nbsp;    }
&nbsp;
&nbsp;    private void drawElements(TextGraphics textGraphics){
&nbsp;
<b class="nc">&nbsp;        List&lt;Drawable&gt; elements = createElements();</b>
<b class="nc">&nbsp;        for(Drawable el : elements){</b>
<b class="nc">&nbsp;            el.draw(textGraphics);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    private void drawTargetSelection(TextGraphics textGraphics, Position position) {
<b class="nc">&nbsp;        textGraphics.setForegroundColor(TextColor.ANSI.YELLOW_BRIGHT);</b>
<b class="nc">&nbsp;        textGraphics.setCharacter(new TerminalPosition(position.getX(), position.getY()), &#39;T&#39;);</b>
&nbsp;    }
&nbsp;
&nbsp;    private void drawSideInfo(TextGraphics textGraphics, Fighter fighter, Fighter target) {
<b class="nc">&nbsp;        GameModel gameModel = (GameModel) super.getModel();</b>
<b class="nc">&nbsp;        GameUtils gameUtils = new GameUtils(gameModel);</b>
<b class="nc">&nbsp;        textGraphics.setBackgroundColor(TextColor.ANSI.BLACK);</b>
<b class="nc">&nbsp;        textGraphics.setForegroundColor(TextColor.ANSI.WHITE);</b>
&nbsp;
<b class="nc">&nbsp;        textGraphics.enableModifiers(SGR.BOLD);</b>
<b class="nc">&nbsp;        textGraphics.putString(new TerminalPosition(1, 2), &quot;Active Player&quot;);</b>
<b class="nc">&nbsp;        textGraphics.disableModifiers(SGR.BOLD);</b>
<b class="nc">&nbsp;        textGraphics.putString(new TerminalPosition(1, 4), &quot;HP: &quot; + fighter.getHealth());</b>
<b class="nc">&nbsp;        textGraphics.putString(new TerminalPosition(1, 6), &quot;Base Damage: &quot; + fighter.getDamage());</b>
<b class="nc">&nbsp;        textGraphics.putString(new TerminalPosition(1, 8), &quot;Real Damage: &quot; + gameUtils.damageCalculator(fighter, target.getPosition()));</b>
<b class="nc">&nbsp;        textGraphics.putString(new TerminalPosition(1, 10), &quot;Base Aim: &quot; + fighter.getAim());</b>
<b class="nc">&nbsp;        textGraphics.putString(new TerminalPosition(1, 12), &quot;Real Aim: &quot; + gameUtils.aimCalculator(fighter, target.getPosition())); //To update when aim calculation is implemented</b>
&nbsp;
<b class="nc">&nbsp;        textGraphics.enableModifiers(SGR.BOLD);</b>
<b class="nc">&nbsp;        textGraphics.putString(new TerminalPosition(1, 16), &quot;Target&quot;);</b>
<b class="nc">&nbsp;        textGraphics.disableModifiers(SGR.BOLD);</b>
<b class="nc">&nbsp;        textGraphics.putString(new TerminalPosition(1, 18), &quot;HP: &quot; + target.getHealth());</b>
<b class="nc">&nbsp;        textGraphics.putString(new TerminalPosition(1, 20), &quot;Damage: &quot; + target.getDamage());</b>
<b class="nc">&nbsp;        textGraphics.putString(new TerminalPosition(1, 22), &quot;Aim: &quot; + target.getAim());</b>
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-12-21 05:05</div>
</div>
</body>
</html>
